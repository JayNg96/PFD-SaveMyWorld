var particles = new Object; particles.init = function () { particles.atlas = imageset.load("images/particles.png"), particles.size = 8, particles.max_frames = 8, particles.variations = 8, particles.gravity = [.5, .5, .5, .5, .3, .3, .3, .3], particles.plist = [] }, particles.add = function (t, e) { var i = new Object; i.ptype = Math.floor(Math.random() * particles.variations), i.current_frame = Math.floor(Math.random() * particles.max_frames), i.x = t - particles.size / 2, i.y = e - particles.size / 2, i.dx = 4 * Math.random() - 2, i.dy = -1 * (4 * Math.random() + 4), particles.plist.push(i) }, particles.logic = function () { for (var t = 0; t < particles.plist.length; t++)particles.plist[t].current_frame++, particles.plist[t].current_frame == particles.max_frames && (particles.plist[t].current_frame = 0), particles.plist[t].x += particles.plist[t].dx, particles.plist[t].dy += particles.gravity[particles.plist[t].ptype], particles.plist[t].y += particles.plist[t].dy; particles.bounds_check() }, particles.bounds_check = function () { for (var t = particles.plist.length - 1; t >= 0; t--)particles.plist[t].y > game_main.VIEW_HEIGHT && particles.plist.splice(t, 1) }, particles.render = function () { for (var t = 0; t < particles.plist.length; t++)particles.render_single(t) }, particles.render_single = function (t) { imageset.render(particles.atlas, particles.plist[t].ptype * particles.size, particles.plist[t].current_frame * particles.size, particles.size, particles.size, particles.plist[t].x, particles.plist[t].y) };